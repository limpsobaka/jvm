# Задача "Понимание JVM"

### Код для разбора:
```public class JvmComprehension {

    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }

    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}
```
## ClassLoader
ClassLoader загружает классы JvmComprehension, Object.\
Сначала классы ищет Bootstrap ClassLoader, затем Platform ClassLoader, после него Application ClassLoader.\
После подгрузки классов JVM проверяет валидность кода, подготавливает примитивы в статических полях и связывает ссылки на другие классы.\
Далее выполняется инициализация статических полей.

## Runtime Data Area
На этапе Runtime Data Area ClassLoader загружает метаинформацию о классах в область памяти Metaspace.\
При выполнении кода:
1. В стеке создается фрейм main() с переменной int i = 1;
2. В heap создается экземпляр класса Object, в фрейме main() стека создается переменная o, которая связывается с созданным экземпляром класса.
3. В heap создается экземпляр класса Integer, в фрейме main() стека создается переменная ii, которая связывается с созданным экземпляром класса и которой присваивается значение 2.
4. В стеке создается фрейм printAll() в который передается:
- Ссылка на экземпляр класса Object o,
- Значение примитива i,
- Ссылка на экземпляр класса Integer ii
5. В heap создается экземпляр класса Integer, в фрейме printAll() стека создается переменная uselessVar, которая связывается с созданным экземпляром класса и которой присваивается значение 700.
6. В стеке создается фрейм toString() в который передается ссылка на экземпляр класса Object o.\
Фрейм toString() возвращает ссылку на экземпляр класса String.\
В стеке создается фрейм println() в который передается:
- Ссылка на экземпляр класса String объекта o,
- Значение примитива i,
- Ссылка на экземпляр класса Integer ii
7. В heap создается экземпляр класса String со значением "finished", в стеке создается фрейм println() в который передается ссылка на созданный экземпляр класса String.\
Фрем printAll() стека уничтожается, GC может удалить экземпляр класса Integer ссылка на который ранее хранилась в переменной uselessVar.
